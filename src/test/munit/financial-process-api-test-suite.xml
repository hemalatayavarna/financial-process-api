<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="impl-process-trial-balance-requests-test-suite.xml" />
	<munit:before-test name="financial-process-api-test-suiteBefore_Test" doc:id="323d17d8-0903-462a-a9b9-677eaf12f268" >
		<munit-tools:mock-when doc:name="Mock Async" doc:id="4d6b27bc-402c-41dd-b80a-b217b93d1675" processor="async">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute whereValue="Async" attributeName="doc:name" />
				</munit-tools:with-attributes>

			</munit-tools:mock-when>
		<munit-tools:mock-when doc:name="Mock Publish to Error MQ" doc:id="3522d2d1-10f9-45d8-8bbc-d5f3623f9abd" processor="jms:publish">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute whereValue="Publish To Error MQ" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:mock-when>
	</munit:before-test>
	<munit:test name="impl-process-trial-balance-requests-test-suite:get-trialbalance:subflowTest" doc:id="bd36e618-2397-41ad-acae-ba38b24b1e10" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Select EMS Trial Balance API" doc:id="e49f36a9-f8ba-4f1e-8cfa-ddba31d91b76" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get EMS DB Financial Data" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/get-ems-db-trial-balance-valid-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
			
</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Select MasterPiece Trial Balance API" doc:id="c1835dbc-bdd0-46e8-878b-61fc570414ea" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get MasterPiece DB Financial Data" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/get-masterpiece-db-trial-balance-valid-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Select CEDS Trial Balance API" doc:id="de160a4d-83a7-4dbb-abec-5e8a665ccbb7" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get CEDS DB Financial Data" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/get-ceds-db-trial-balance-valid-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Get IMD DB Mapping Data" doc:id="31c601d0-efcd-4106-ad70-e89dbeb36eb7" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get IMD DB Mapping Data" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/get-imd-child-parent-mapping-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		
</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="3685f95a-0fa7-4e4b-9f7f-35de0b3e07a8" >
				<munit:attributes value="#[MunitTools::getResourceAsString('examples/get-process-trial-balance-api-valid-query-params.json')]" mediaType="application/json" />

			</munit:set-event>
			<flow-ref doc:name="get:\reports\trial-balance:financial-process-api-config" doc:id="8addc525-6ea6-41c8-abe4-306e4c049443" name="get:\reports\trial-balance:financial-process-api-config" />
		</munit:execution>
		<munit:validation >
			<munit-tools:verify-call doc:name="Verify Call to Log End EMS Flow" doc:id="eab3134b-e480-4258-9617-0862326b2274" processor="logger" atLeast="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End EMS API Flow" attributeName="doc:name" />
				</munit-tools:with-attributes>

			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Call to Log End MasterPiece Flow" doc:id="be6b2d1d-8df2-45b0-ae1d-44317b413d0a" processor="logger">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End MasterPiece API Flow" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Call to Log End CEDS Flow" doc:id="3cc8d086-7db8-488b-8285-61cb84533af7" processor="logger">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End CEDS API Flow" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Log Call End to Get TrialBalance Details" doc:id="d0347e24-aaa7-4035-9ffa-199af95522fc" processor="logger">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End Get TrialBalance Details" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:assert doc:name="Assert payload is Expected" doc:id="33373049-7c7f-4087-af31-c8dc52953b11" message="Actual response matches with the Expected response">
				<munit-tools:that ><![CDATA[#[import * from dw::test::Asserts 
 ---
payload must equalToResource("examples/get-process-trial-balance-valid-response.json","application/json")]]]></munit-tools:that>
			</munit-tools:assert>						
		</munit:validation>
	</munit:test>
	<munit:test name="impl-process-transactions-requests-test-suite:get-ems-mp-ceds-transactions:subflowTest" doc:id="92fa0d71-33d7-47b9-9a06-78a9e50aa969" description="Test">
			<munit:behavior>
				<munit-tools:mock-when doc:name="Select EMS Transactions API" doc:id="bab55140-f480-415d-b632-6ce39a23f091" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get EMS DB Financial Data" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/get-ems-db-transactions-valid-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
				</munit-tools:mock-when>
				<munit-tools:mock-when doc:name="Select MasterPiece Transactions API" doc:id="f62e4164-eaee-4f6a-9354-97c76bd1daed" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get MasterPiece DB Financial Data" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/get-masterpiece-db-transactions-valid-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
				</munit-tools:mock-when>
				<munit-tools:mock-when doc:name="Select CEDS Transactions API" doc:id="cd88b1d2-663a-47bb-9b4f-1cce1f407a20" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get CEDS DB Financial Data" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/get-ceds-db-transactions-valid-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
				</munit-tools:mock-when>
			</munit:behavior>
			<munit:execution>
				<munit:set-event doc:name="Set Event" doc:id="b86b1940-8c11-4e45-85a9-7a8f8d9efec1">
				<munit:attributes value="#[MunitTools::getResourceAsString('examples/get-process-transactions-all-systems-valid-query-params.json')]" mediaType="application/json" />
				</munit:set-event>
				<flow-ref doc:name="get:\reports\trial-balance\transactions:financial-process-api-config" doc:id="cc6bc653-ebbf-47e9-a3a2-165532465ebc" name="get:\reports\trial-balance\transactions:financial-process-api-config" />
			</munit:execution>
			<munit:validation>
				<munit-tools:verify-call doc:name="Verify Call to Log End EMS Flow" doc:id="26c0fdad-730d-4d4e-9dcb-e08859f145f2" processor="logger" atLeast="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End EMS API Flow" attributeName="doc:name" />
				</munit-tools:with-attributes>
				</munit-tools:verify-call>
				<munit-tools:verify-call doc:name="Verify Call to Log End MasterPiece Flow" doc:id="b8e44449-99f2-4756-a965-7ec34da3000f" processor="logger" atLeast="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End MasterPiece API Flow" attributeName="doc:name" />
				</munit-tools:with-attributes>
				</munit-tools:verify-call>
				<munit-tools:verify-call doc:name="Verify Call to Log End CEDS Trial Balance Requests" doc:id="822eb59f-f2d7-46fd-be72-a625a10e6e7c" processor="logger" atLeast="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End CEDS API Flow" attributeName="doc:name" />
				</munit-tools:with-attributes>
				</munit-tools:verify-call>
				<munit-tools:verify-call doc:name="Log Call End Transaction Request" doc:id="fd63dca4-45bf-4d2a-9b9e-893d4a10b32a" processor="logger" atLeast="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End Transactions Requests" attributeName="doc:name" />
				</munit-tools:with-attributes>
				</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Log Call End to Get Transaction Details" doc:id="c65b0b78-7db8-4d66-9122-df554ec1418b" processor="logger" atLeast="1" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End Get Transactions Details" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:assert doc:name="Assert payload is Expected" doc:id="353dcaef-f13c-4145-b7eb-94ea4c367440" message="Actual response matches with the Expected response">
					<munit-tools:that><![CDATA[#[import * from dw::test::Asserts 
 ---
payload must equalToResource("examples/get-process-transactions-api-all-systems-valid-response.json","application/json")]]]></munit-tools:that>
				</munit-tools:assert>
			</munit:validation>
		</munit:test>
	<munit:test name="impl-process-transactions-requests-test-suite:get-mp-ems-transactions:subflowTest" doc:id="6bde0a5f-59ad-46e5-97ff-ecbf507ade67" description="Test">
			<munit:behavior>
				<munit-tools:mock-when doc:name="Select EMS Transactions API" doc:id="67caddb5-71c4-4888-885e-9151de9a94fd" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get EMS DB Financial Data" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/get-ems-db-transactions-valid-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
				</munit-tools:mock-when>
				<munit-tools:mock-when doc:name="Select MasterPiece Transactions API" doc:id="339b70b4-b728-4c22-9f78-7055d324778f" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get MasterPiece DB Financial Data" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/get-masterpiece-db-transactions-valid-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
				</munit-tools:mock-when>
				<munit-tools:mock-when doc:name="Select CEDS Transactions API" doc:id="7cb14a63-07fa-431a-8de5-4b41d0ce87ba" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get CEDS DB Financial Data" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/get-ceds-db-transactions-valid-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
				</munit-tools:mock-when>
			</munit:behavior>
			<munit:execution>
				<munit:set-event doc:name="Set Event" doc:id="363a3892-038b-41a2-8891-25a1837a7d3b">
				<munit:attributes value="#[MunitTools::getResourceAsString('examples/get-process-transactions-ems-mp-valid-query-params.json')]" mediaType="application/json" />
				</munit:set-event>
				<flow-ref doc:name="get:\reports\trial-balance\transactions:financial-process-api-config" doc:id="5edfa89c-114a-4fb0-b1b0-c207f73125f4" name="get:\reports\trial-balance\transactions:financial-process-api-config" />
			</munit:execution>
			<munit:validation>
				<munit-tools:verify-call doc:name="Verify Call to Log End EMS Transactions Requests" doc:id="aa92b3f8-5aba-4151-abb3-cdfaf7d6561b" processor="logger" atLeast="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End EMS Transactions Requests" attributeName="doc:name" />
				</munit-tools:with-attributes>
				</munit-tools:verify-call>
				<munit-tools:verify-call doc:name="Verify Call to Log End MasterPiece Transactions Requests" doc:id="249c2834-a18a-436e-8959-e08fcf7956bd" processor="logger" atLeast="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End MasterPiece Transactions Requests" attributeName="doc:name" />
				</munit-tools:with-attributes>
				</munit-tools:verify-call>
				<munit-tools:verify-call doc:name="Log Call End Transaction Request" doc:id="61aa6dd7-5cf1-4d10-8522-c695ae1eb78d" processor="logger" atLeast="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End Transactions Requests" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Log Call End to Get Transaction Details" doc:id="bbff7901-56a0-48c3-9e20-73f23b542b55" processor="logger" atLeast="1" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End Get Transactions Details" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:assert doc:name="Assert payload is Expected" doc:id="48e5ae02-430b-48ef-8c47-7267657e54af" message="Actual response matches with the Expected response">
					<munit-tools:that><![CDATA[#[import * from dw::test::Asserts 
 ---
payload must equalToResource("examples/get-process-transactions-api-ems-mp-systems-valid-response.json","application/json")]]]></munit-tools:that>
				</munit-tools:assert>
			</munit:validation>
		</munit:test>
	<munit:test name="impl-process-transactions-requests-test-suite:get-mp-ceds-transactions:subflowTest" doc:id="6bf75bbe-46d7-4f43-a524-2f318a064557" description="Test" timeOut="200000">
			<munit:behavior>
				<munit-tools:mock-when doc:name="Select EMS Transactions API" doc:id="269f67be-ce52-4caa-80ad-cccf120ab0da" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get EMS DB Financial Data" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/get-ems-db-transactions-valid-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
				</munit-tools:mock-when>
				<munit-tools:mock-when doc:name="Select MasterPiece Transactions API" doc:id="2893d5bc-937a-408e-8eb6-97dbb34b6932" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get MasterPiece DB Financial Data" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/get-masterpiece-db-transactions-valid-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
				</munit-tools:mock-when>
				<munit-tools:mock-when doc:name="Select CEDS Transactions API" doc:id="db20f1de-32e9-49b5-ab42-fc83c75c6e64" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get CEDS DB Financial Data" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/get-ceds-db-transactions-valid-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
				</munit-tools:mock-when>
			</munit:behavior>
			<munit:execution>
				<munit:set-event doc:name="Set Event" doc:id="e0862b88-7266-4431-9871-3b6818ddb329">
				<munit:attributes value="#[MunitTools::getResourceAsString('examples/get-process-transactions-ceds-mp-valid-query-params.json')]" mediaType="application/json" />
				</munit:set-event>
				<flow-ref doc:name="get:\reports\trial-balance\transactions:financial-process-api-config" doc:id="9e709316-26b7-4c4d-96fb-9acefe2535cc" name="get:\reports\trial-balance\transactions:financial-process-api-config" />
			</munit:execution>
			<munit:validation>
				<munit-tools:verify-call doc:name="Verify Call to Log End MasterPiece Transactions Requests" doc:id="d6466ded-4a79-456e-b89e-9394ca2ab9af" processor="logger" atLeast="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End MasterPiece Transactions Requests" attributeName="doc:name" />
				</munit-tools:with-attributes>
				</munit-tools:verify-call>
				<munit-tools:verify-call doc:name="Verify Call to Log End CEDS Transactions Requests" doc:id="820e6dca-976d-44cf-8382-6db82ed259ee" processor="logger" atLeast="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End CEDS Transactions Requests" attributeName="doc:name" />
				</munit-tools:with-attributes>
				</munit-tools:verify-call>
				<munit-tools:verify-call doc:name="Log Call End Transaction Request" doc:id="792c7e0d-7462-49b3-b13f-a87fcbd49976" processor="logger" atLeast="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End Transactions Requests" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Log Call End to Get Transaction Details" doc:id="81dd3875-66a2-4aac-8d8a-b140a30b4d6e" processor="logger" atLeast="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Log End Get Transactions Details" attributeName="doc:name" />
				</munit-tools:with-attributes>
				</munit-tools:verify-call>
				<munit-tools:assert doc:name="Assert payload is Expected" doc:id="ace0b70a-d902-4e94-9c2e-ca49f8d82a53" message="Actual response matches with the Expected response">
					<munit-tools:that><![CDATA[#[import * from dw::test::Asserts 
 ---
payload must equalToResource("examples/get-process-transactions-api-ceds-mp-systems-valid-response.json","application/json")]]]></munit-tools:that>
				</munit-tools:assert>
			</munit:validation>
		</munit:test>
	<munit:test name="impl-child-parent-mapping-requests:subflow:test" doc:id="80ddbcee-1669-4385-9f9a-63537cac2a86" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Get Board External API Mapping Data" doc:id="5045e217-08fa-4f69-b48b-6cc579bc9a87" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="board-system-api-private-httpRequesterConfig" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/get-board-sapi-parent-child-sites-valid-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Post IMD DB Mapping Data" doc:id="7b63012f-03ef-44e6-87fd-19d32df8573e" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Post IMD DB Mapping Data" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('examples/post-child-parent-mapping-valid-response.json')]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="26c35c2a-232f-4927-9e9f-ed6c1d3e26e8" >
			</munit:set-event>
			<flow-ref doc:name="get:\mappings\child-parent-sites:application\json:financial-process-api-config" doc:id="9028166e-f379-462d-a655-e2cd1b41f680" name="get:\mappings\child-parent-sites:financial-process-api-config" />
		</munit:execution>
		<munit:validation >
			<munit-tools:verify-call doc:name="End Post Child Parent Site Mappings" doc:id="5b6c01aa-baed-4271-834d-0e4c40a402e1" processor="logger">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="End Post Child Parent Site Mappings" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>


</mule>
